#!/usr/bin/env ansible-playbook

- hosts: all
  become: false

  vars_files:
    - custom.yml
    - secret.yml
    - software.yml

  roles:
    - role: vaulttec.zsh

    - role: system

    - role: ssh
      when: software|select("equalto", "ssh")

    - role: samba
      when: software|select("equalto", "samba")
    
    - role: docker

    - role: postgres
      when: software|select("equalto", "postgres")
    
    - role: redis
      when: software|select("equalto", "redis")
    
    - role: authelia
      when: software|select("equalto", "authelia")

    - role: adminer
      when: software|select("equalto", "adminer")
    
    - role: traefik
      when: software|select("equalto", "traefik")
    
    - role: finish